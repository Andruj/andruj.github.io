var panels=function(){var e={},n=[];return e.active=-1,e.connect=function(){$(".panel").each(function(){n.push(this)})},e.get=function(e){return $(n[e])},e.open=function(t){var i=$(n[t]);i.css({height:"100%"}),height=i.outerHeight(),i.css({height:0}),setTimeout(function(){e.active=t},0),i.velocity({height:height},{duration:vel["in"].duration,easing:vel["in"].easing,complete:function(){i.css({height:"auto"})}})},e.swap=function(t){var i=$(n[e.active]),o=$(n[t]);i.css({height:0}),o.css({height:"auto"}),e.active=t},e.close=function(t,i){var o=$(n[t]);e.active=-1,o.velocity({height:0},{duration:vel.out.duration,easing:vel.out.easing,complete:function(){i&&i()}})},e}(),email=function(){var e,n={};return n.connect=function(){e=$("#emailForm"),n=$("#email")},n.close=function(){n.removeClass("danger").removeClass("large"),n.text("Email"),n.velocity({rotateZ:0},{duration:0}),e.velocity({height:0},{duration:vel.out.duration,easing:vel.out.easing})},n.open=function(){var t;n.html("&times;"),n.addClass("danger").addClass("large"),n.velocity({rotateZ:180},{duration:750,easing:[50,10.5]}),e.css({height:"100%"}),t=e.height(),e.css({height:0}),e.velocity({height:t},{duration:vel["in"].duration,easing:vel["in"].easing,complete:function(){}})},n}(),vel={"in":{duration:350,easing:[50,10]},out:{duration:200,easing:[50,15]}};$(document).ready(function(){var e=!1,n=!0,t=$(".work-item"),i=$("#down"),o=!1;panels.connect(),email.connect(),$(window).scroll(function(){var e=$(this).scrollTop();!o&&e>500?(o=!0,i.addClass("hidden")):500>=e&&(o=!1,i.removeClass("hidden"))}),$(document).on("click","#work",function(){n&&(n=!1,panels.open(0))}),$(document).on("click","#contactAnchor",function(){n&&(n=!1,$("#email").trigger("click"))}),$(document).on("click","#email",function(t){t.preventDefault(),n=!1,e?(e=!e,email.close()):(e=!e,email.open())}),$(document).on("click",".work-item",function(){var e=t.index($(this));n=!1,panels.active==e?(panels.close(e),t.removeClass("active").removeClass("inactive")):(t.addClass("inactive"),$(this).removeClass("inactive").addClass("active"),-1!=panels.active?panels.swap(e):panels.open(e))}),$(document).on("click","#close",function(e){e.preventDefault();var n=$(this).parents(".panel").index();t.removeClass("active").removeClass("inactive"),panels.close(--n)}),$(document).on("click","#down",function(e){e.preventDefault();var n=$(this),i=$(n.attr("href")).position();$("html, body").animate({scrollTop:i.top},{duration:vel["in"].duration,complete:function(){t.first().trigger("click"),n.css({display:"none"})}})})}),$(window).load(function(){var e=$("#down");e.velocity({opacity:1,rotateZ:360},{duration:1500,delay:500,easing:vel["in"].easing,complete:function(){$(this).velocity({color:"#c0392b"},{duration:vel["in"].duration,complete:function(){$(this).velocity("reverse")}})}})});